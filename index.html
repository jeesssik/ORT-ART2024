<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>ORT ART FESTIVAL</title>
    <link rel="stylesheet" href="./styles/main.css" />
  </head>
  <body>
    <div class="header">
      <div class="header__wrapper">
        <p class="header__location">AUDITORIO RIO</p>
        <p class="header__title" data-text="ORT ART">ORT ART</p>
        <p class="header__date">7 de Noviembre</p>
      </div>
    </div>
    <div class="road-map">
      <div class="time-line">
        <div class="time-line__header">
          <span class="time-line__stage time-line__stage--left"
            >Escenario 1</span
          >
          <span class="time-line__stage time-line__stage--right"
            >Escenario 2</span
          >
        </div>

        <ul class="time-line__list">
         
        </ul>
      </div>
    </div>
    <div class="footer">
      <p class="footer__copyright">ORT ART 2024.</p>
    </div>
    
    <script src="./scripts/bundle.js"></script>
    <script>


window.onload = function () {
  fetchTSV();
};

window.addEventListener("popstate", function () {
  fetchTSV();
});

const tsvUrl =
  "https://docs.google.com/spreadsheets/d/e/2PACX-1vSjnbBRIf-mixn33CJ7u1fE2A7EtOVjWHaMulbUa58joEiCMqoVJBM0wKXsp39UQTTtwr3MDRhVo_75/pub?output=tsv"

async function fetchTSV() {
  try {
    const response = await fetch(tsvUrl);
    const data = await response.text();

    // Dividimos en líneas y columnas
    let rows = data.split("\n").map((line) => line.split("\t"));
    rows = rows.slice(1, rows.length); // Eliminamos la primera fila (cabeceras)

    // Convertimos el TSV en objetos que representen cada banda
    const bands = rows.map((row) => {
      return {
        banda: row[0],      // Nombre de la banda
        escenario: row[1],  // Escenario
        horario: row[2],    // Horario
      };
    });

    console.log(bands); // Mostramos en consola las bandas
    renderBands(bands); // Llamamos a la función para renderizar en el HTML
  } catch (error) {
    console.error("Error al cargar los datos:", error);
  }
}

// Función para renderizar cada banda en el HTML
function renderBands(bands) {
  const leftStage = document.querySelector(".time-line__list");
  leftStage.innerHTML = ""; // Limpiamos el contenido existente

  bands.forEach((band) => {
    const item = document.createElement("li");
    item.classList.add("time-line__item", band.escenario === "1" ? "time-line__item--left" : "time-line__item--right");

    item.innerHTML = `
      <div class="time-line__musical-group-wrapper">
        <p class="time-line__time-performance">${band.horario}</p>
        <p class="time-line__music-group">${band.banda}</p>
        <p class="time-line__official-cite">
          <a href="#">Integrantes</a>
        </p>
        <p class="time-line__mobile-stage">Escenario ${band.escenario}</p>
      </div>
    `;
    leftStage.appendChild(item);
  });
}



    </script>
  </body>
</html>
